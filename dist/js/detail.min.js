"use strict";$(function(){magnifier({magnifier:"#magnifier1",width:500,height:500,moveWidth:null,zoom:2})});var oBuy=document.getElementById("buy");initCart();var oAddCart=document.querySelector(".a2");function initCart(){var r=window.localStorage,n=convertJsonStrToJsonObj(r.cart?r.cart:"");for(var t in n)n[t].num}function convertJsonStrToJsonObj(r){return r?JSON.parse(r):{}}oBuy.onclick=function(){location.href="cart.html"},oAddCart.onclick=function(){var r=$("#cartName").html(),n=$("#cartPrice").html(),t=$("#cartSrc").html(),o=($(".jia").html(),$(".jian").html(),$(".n").html(),window.localStorage),a=convertJsonStrToJsonObj(o.cart?o.cart:"");r in a?(a[r].num++,alert(1)):a[r]={name:r,price:n,src:t,number:1},o.cart=JSON.stringify(a),console.log(a),alert("加入购物车成功")},$(".jian").on("click",function(){var r=window.localStorage,n=r.cart?r.cart:"",t=convertStrToObj(n);for(var o in t)1<t[o].n&&t[o].n--,$(".n").val(t[o].n),r.cart=JSON.stringify(t)}),$(".jia").on("click",function(){var r=window.localStorage,n=r.cart?r.cart:"",t=convertStrToObj(n);for(var o in t)t[o].n++,$(".n").val(t[o].n),r.cart=JSON.stringify(t)}),$(".n").blur(function(){var r=window.localStorage,n=r.cart?r.cart:"",t=convertStrToObj(n);for(var o in t)t[o].n=$(".n").val(),r.cart=JSON.stringify(t)});